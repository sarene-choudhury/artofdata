---
layout: post
title: API Lab
subtitle: By Sarene
gh-repo: daattali/beautiful-jekyll
gh-badge: [star, fork, follow]
tags: [test]
comments: true
---

## Creating the CSV

This was the most challenging part of the lab for me. I knew the baseline of code I needed to use in creating the csv, but I couldn't figure out how to iterate through all the rows. To solve this, I worked with Divya to set up a loop that would do what we wanted. We originally tried to use a for loop, but then we realized that a while loop was better suited to our needs. Then, we found what we thought should have worked (increasing the variable 'row'), but we were missing information, which turned out to be that we needed to put the code that saved the correct data and printed it, as well as the payload, into the while loop as well because those changed everytime the while loop ran. 

~~~

base_url = "https://hm-cs.herokuapp.com"
endpoint = "/socks"
api_key = "ArtOfDataKEY123"

row = 0

payload = {
    'key': api_key,
    'idx': row
}

response = requests.get(base_url + endpoint, params = payload)
data = response.text
while response.ok:
    payload = {
        'key': api_key,
        'idx': row
    }
    row += 1
    response = requests.get(base_url + endpoint, params = payload)
    data = response.text
    print(data)
if not response.ok:
    print(response.status_code, response.text)
    
~~~

